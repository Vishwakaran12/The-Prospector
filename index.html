<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Prospector - Find Your Digital Gold</title>
    <meta name="description" content="Digital prospecting tool for gamers. Find your next gaming treasure in the Wild West of Innovation.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'western': ['Creepster', 'cursive'],
                        'body': ['Lato', 'sans-serif'],
                    },
                    colors: {
                        'rustic-gold': '#d4b58e',
                        'dark-wood': '#2d1810',
                        'darker-wood': '#1a0e08',
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            background: 
                linear-gradient(rgba(45, 24, 16, 0.85), rgba(26, 14, 8, 0.85)),
                url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4b58e' fill-opacity='0.05'%3E%3Cpath d='M0 0h40v40H0V0zm10 10h20v20H10V10zm5 5h10v10H15V15z'/%3E%3C/g%3E%3C/svg%3E");
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        .wood-texture {
            background: 
                linear-gradient(45deg, rgba(212, 181, 142, 0.1) 0%, transparent 50%),
                linear-gradient(-45deg, rgba(212, 181, 142, 0.05) 0%, transparent 50%);
        }
        
        .gold-border {
            border: 3px solid #d4b58e;
            box-shadow: 0 0 20px rgba(212, 181, 142, 0.3);
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dotted-border {
            border-top: 2px dotted #d4b58e;
            border-bottom: 2px dotted #d4b58e;
        }
    </style>
</head>
<body class="font-body text-rustic-gold">
    <div class="min-h-screen flex items-center justify-center p-4">
        <!-- Main Container -->
        <div class="w-full max-w-6xl bg-dark-wood/80 backdrop-blur-sm gold-border rounded-xl wood-texture">
            <!-- Header -->
            <header class="text-center py-8 px-6">
                <h1 class="font-western text-6xl md:text-7xl lg:text-8xl text-rustic-gold mb-4 drop-shadow-lg" data-testid="title-main">
                    The Prospector
                </h1>
                <div class="dotted-border py-3 mx-auto max-w-md">
                    <p class="text-xl md:text-2xl text-rustic-gold/90 font-light" data-testid="text-subtitle">
                        Find your digital gold
                    </p>
                </div>
            </header>
            
            <!-- Search Section -->
            <div class="px-6 pb-8">
                <div class="max-w-2xl mx-auto">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input 
                            type="text" 
                            id="searchInput"
                            placeholder="What are you prospecting for?"
                            class="flex-1 px-6 py-4 rounded-full bg-darker-wood border-2 border-rustic-gold text-rustic-gold placeholder-rustic-gold/60 focus:outline-none focus:ring-4 focus:ring-rustic-gold/30 focus:border-rustic-gold shadow-lg transition-all duration-300 text-lg"
                            data-testid="input-search"
                        />
                        <button 
                            id="prospectBtn"
                            class="px-8 py-4 bg-rustic-gold text-dark-wood font-bold rounded-full hover:bg-rustic-gold/90 focus:outline-none focus:ring-4 focus:ring-rustic-gold/30 shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95 text-lg"
                            data-testid="button-prospect"
                        >
                            Prospect!
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Loading State -->
            <div id="loadingState" class="hidden px-6 pb-8">
                <div class="text-center">
                    <div class="inline-flex items-center space-x-3">
                        <svg class="spinner w-8 h-8 text-rustic-gold" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span class="text-xl text-rustic-gold/90" data-testid="text-loading">Prospecting for gold nuggets...</span>
                    </div>
                </div>
            </div>
            
            <!-- Results Section -->
            <div id="resultsSection" class="px-6 pb-8">
                <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Results will be populated here -->
                </div>
                
                <!-- Empty State -->
                <div id="emptyState" class="hidden text-center py-12">
                    <div class="text-2xl text-rustic-gold/70 mb-4">ü§†</div>
                    <p class="text-xl text-rustic-gold/80" data-testid="text-empty-state">No gold nuggets found. Try a new claim!</p>
                </div>
                
                <!-- Error State -->
                <div id="errorState" class="hidden text-center py-12">
                    <div class="text-2xl text-red-400 mb-4">‚ö†Ô∏è</div>
                    <p class="text-xl text-red-400" data-testid="text-error-state">Claim jumped! Something went wrong with the prospecting.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock game data for different search categories
        const gameDatabase = {
            space: [
                {
                    title: "Stellar Frontier",
                    rating: 4.8,
                    description: "Explore vast galaxies and build your space empire in this epic strategy game.",
                    category: "Strategy"
                },
                {
                    title: "Cosmic Miners",
                    rating: 4.6,
                    description: "Mine asteroids and discover rare minerals in the depths of space.",
                    category: "Simulation"
                },
                {
                    title: "Nebula Warriors",
                    rating: 4.7,
                    description: "Epic space combat with stunning visuals and intense multiplayer battles.",
                    category: "Action"
                },
                {
                    title: "Galaxy Traders",
                    rating: 4.5,
                    description: "Build a trading empire across the stars in this economic simulation.",
                    category: "Simulation"
                }
            ],
            puzzle: [
                {
                    title: "Mind Bender Pro",
                    rating: 4.9,
                    description: "Challenge your brain with increasingly complex 3D puzzles and logic problems.",
                    category: "Puzzle"
                },
                {
                    title: "Crystal Connections",
                    rating: 4.7,
                    description: "Connect colorful crystals to create powerful combinations and clear the board.",
                    category: "Puzzle"
                },
                {
                    title: "Escape the Labyrinth",
                    rating: 4.6,
                    description: "Navigate through mind-twisting mazes with clever mechanics and hidden secrets.",
                    category: "Adventure"
                },
                {
                    title: "Logic Masters",
                    rating: 4.8,
                    description: "Master the art of deduction with hundreds of challenging logic puzzles.",
                    category: "Puzzle"
                }
            ],
            adventure: [
                {
                    title: "Lost Kingdom Chronicles",
                    rating: 4.9,
                    description: "Embark on an epic quest to restore a fallen kingdom in this immersive RPG.",
                    category: "RPG"
                },
                {
                    title: "Treasure Hunter's Legacy",
                    rating: 4.7,
                    description: "Follow ancient maps and solve mysteries to uncover legendary treasures.",
                    category: "Adventure"
                },
                {
                    title: "Mystic Realms",
                    rating: 4.8,
                    description: "Explore magical worlds filled with wonder, danger, and ancient secrets.",
                    category: "Fantasy"
                }
            ],
            action: [
                {
                    title: "Shadow Strike Force",
                    rating: 4.6,
                    description: "Fast-paced tactical shooter with realistic graphics and intense combat.",
                    category: "FPS"
                },
                {
                    title: "Neon Rush",
                    rating: 4.5,
                    description: "High-speed cyberpunk racing through neon-lit cityscapes.",
                    category: "Racing"
                },
                {
                    title: "Combat Elite",
                    rating: 4.7,
                    description: "Master various fighting techniques in this competitive combat game.",
                    category: "Fighting"
                }
            ],
            default: [
                {
                    title: "Golden Valley Ranch",
                    rating: 4.8,
                    description: "Build and manage your own Wild West ranch in this charming simulation game.",
                    category: "Simulation"
                },
                {
                    title: "Prospector's Dream",
                    rating: 4.9,
                    description: "Strike it rich by mining for gold and precious gems in the frontier.",
                    category: "Strategy"
                },
                {
                    title: "Frontier Justice",
                    rating: 4.7,
                    description: "Become a legendary sheriff in this story-driven Western adventure.",
                    category: "Adventure"
                },
                {
                    title: "Saloon Tycoon",
                    rating: 4.6,
                    description: "Run the most successful saloon in the Wild West and build your empire.",
                    category: "Business"
                },
                {
                    title: "Wild West Legends",
                    rating: 4.8,
                    description: "Create your own cowboy legend in this open-world Western RPG.",
                    category: "RPG"
                }
            ]
        };

        // Mock API function to simulate game search
        async function mockGeminiApi(query) {
            // Simulate network latency
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const lowerQuery = query.toLowerCase();
            
            // Determine which category to return based on query
            if (lowerQuery.includes('space') || lowerQuery.includes('galaxy') || lowerQuery.includes('star')) {
                return gameDatabase.space;
            } else if (lowerQuery.includes('puzzle') || lowerQuery.includes('brain') || lowerQuery.includes('logic')) {
                return gameDatabase.puzzle;
            } else if (lowerQuery.includes('adventure') || lowerQuery.includes('quest') || lowerQuery.includes('explore')) {
                return gameDatabase.adventure;
            } else if (lowerQuery.includes('action') || lowerQuery.includes('fight') || lowerQuery.includes('combat')) {
                return gameDatabase.action;
            } else if (lowerQuery.trim() === '') {
                return []; // Empty search returns no results
            } else {
                return gameDatabase.default;
            }
        }

        // Function to create a game card element
        function createGameCard(game) {
            const card = document.createElement('div');
            card.className = 'bg-darker-wood border-2 border-rustic-gold/50 rounded-xl p-6 shadow-lg hover:shadow-xl hover:border-rustic-gold transition-all duration-300 transform hover:scale-105 fade-in wood-texture';
            card.setAttribute('data-testid', `card-game-${game.title.toLowerCase().replace(/\s+/g, '-')}`);
            
            card.innerHTML = `
                <div class="mb-4">
                    <h3 class="text-xl font-bold text-rustic-gold mb-2" data-testid="text-game-title">${game.title}</h3>
                    <div class="flex items-center space-x-2 mb-2">
                        <div class="flex text-yellow-400">
                            ${'‚òÖ'.repeat(Math.floor(game.rating))}${'‚òÜ'.repeat(5 - Math.floor(game.rating))}
                        </div>
                        <span class="text-rustic-gold/80 text-sm" data-testid="text-game-rating">${game.rating}/5</span>
                        <span class="bg-rustic-gold/20 text-rustic-gold px-2 py-1 rounded-full text-xs" data-testid="text-game-category">${game.category}</span>
                    </div>
                </div>
                <p class="text-rustic-gold/90 mb-6 leading-relaxed" data-testid="text-game-description">${game.description}</p>
                <button class="w-full bg-rustic-gold text-dark-wood font-bold py-3 px-4 rounded-full hover:bg-rustic-gold/90 transition-all duration-300 transform hover:scale-105 active:scale-95" 
                        data-testid="button-stake-claim"
                        onclick="stakeClaimHandler('${game.title}')">
                    Stake a Claim
                </button>
            `;
            
            return card;
        }

        // Function to handle staking a claim
        function stakeClaimHandler(gameTitle) {
            console.log(`Staked a claim on: ${gameTitle}`);
            // You could add more functionality here like saving to localStorage
            alert(`ü§† Claim staked on "${gameTitle}"! This nugget is now in your prospecting bag.`);
        }

        // Function to display search results
        function displayResults(games) {
            const resultsGrid = document.getElementById('resultsGrid');
            const emptyState = document.getElementById('emptyState');
            
            // Clear previous results
            resultsGrid.innerHTML = '';
            
            if (games.length === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                games.forEach(game => {
                    const card = createGameCard(game);
                    resultsGrid.appendChild(card);
                });
            }
        }

        // Function to show/hide loading state
        function toggleLoadingState(show) {
            const loadingState = document.getElementById('loadingState');
            const resultsSection = document.getElementById('resultsSection');
            
            if (show) {
                loadingState.classList.remove('hidden');
                resultsSection.classList.add('hidden');
            } else {
                loadingState.classList.add('hidden');
                resultsSection.classList.remove('hidden');
            }
        }

        // Function to show error state
        function showErrorState() {
            const errorState = document.getElementById('errorState');
            const emptyState = document.getElementById('emptyState');
            const resultsGrid = document.getElementById('resultsGrid');
            
            resultsGrid.innerHTML = '';
            emptyState.classList.add('hidden');
            errorState.classList.remove('hidden');
        }

        // Main search function
        async function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const query = searchInput.value.trim();
            
            try {
                // Show loading state
                toggleLoadingState(true);
                
                // Perform mock API call
                const results = await mockGeminiApi(query);
                
                // Hide loading state and show results
                toggleLoadingState(false);
                displayResults(results);
                
            } catch (error) {
                console.error('Search error:', error);
                toggleLoadingState(false);
                showErrorState();
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            const prospectBtn = document.getElementById('prospectBtn');
            
            // Button click handler
            prospectBtn.addEventListener('click', performSearch);
            
            // Enter key handler for input
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Show default results on page load
            displayResults(gameDatabase.default);
        });
    </script>
</body>
</html>